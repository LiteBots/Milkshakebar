<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>MilkMi</title>
   
  <meta name="theme-color" content="#FF6600">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

  <style>
    :root {
      /* Palette - Premium Flat */
      --primary: #FF6600;
      --primary-glow: rgba(255, 102, 0, 0.3);
      --bg-body: #F2F4F6;
      --bg-surface: #FFFFFF;
      --text-main: #111827;
      --text-sub: #6B7280;
      --border: #E5E7EB;
       
      --glass-bg: rgba(255, 255, 255, 0.85);
      --glass-border: rgba(255, 255, 255, 0.5);
       
      --radius-l: 24px;
      --radius-m: 16px;
       
      --nav-height: 85px;
      --fab-size: 64px;
       
      /* Activity Colors */
      --color-order: #FF6600;
      --color-res: #3B82F6;
      --color-money: #10B981;

      /* Dynamic Notch / Status Bar Spacing */
      --safe-top: env(safe-area-inset-top, 20px);
    }

    body.dark-mode {
      --bg-body: #0F0F0F;
      --bg-surface: #1C1C1E;
      --text-main: #FFFFFF;
      --text-sub: #9CA3AF;
      --border: #2D2D30;
      --glass-bg: rgba(28, 28, 30, 0.85);
      --glass-border: rgba(255, 255, 255, 0.1);
      --primary-glow: rgba(255, 102, 0, 0.5);
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
     
    body {
      font-family: 'Plus Jakarta Sans', sans-serif;
      color: var(--text-main);
      background-color: var(--bg-body);
      overflow: hidden; /* Zablokowane przewijanie podczas loadera */
      overscroll-behavior-y: none;
      transition: background 0.3s, color 0.3s;
      padding-bottom: calc(var(--nav-height) + 30px);
      padding-top: var(--safe-top);
    }

    /* --- LOADER / SPLASH SCREEN --- */
    #splash-screen {
      position: fixed;
      inset: 0;
      background: #111;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1), visibility 0.8s;
    }
     
    .loader-content {
      text-align: center;
      animation: splashPop 0.6s ease-out;
    }

    .loader-logo {
      font-size: 3rem;
      font-weight: 800;
      color: white;
      margin-bottom: 20px;
      letter-spacing: -1px;
    }
    .loader-logo span { color: var(--primary); }

    .loader-spinner {
      width: 50px;
      height: 50px;
      border: 3px solid rgba(255, 255, 255, 0.1);
      border-top: 3px solid var(--primary);
      border-radius: 50%;
      margin: 0 auto;
      animation: spin 1s linear infinite;
    }

    .loader-text {
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.8rem;
      font-weight: 600;
      margin-top: 20px;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    /* --- LAYOUT --- */
    .app-container {
      max-width: 480px; margin: 0 auto; min-height: 100vh;
      position: relative; background: var(--bg-body);
      box-shadow: 0 0 40px rgba(0,0,0,0.05);
      opacity: 0; /* Ukryta na starcie */
      transition: opacity 0.5s ease;
    }

    /* --- HEADER --- */
    .app-header {
      padding: 15px 24px;
      display: flex; justify-content: space-between; align-items: center;
      position: sticky; 
      top: 0; 
      z-index: 90;
      background: var(--bg-body);
      transition: background 0.3s;
      margin-top: 10px;
    }
    .brand { font-size: 1.6rem; font-weight: 800; letter-spacing: -0.5px; }
    .brand span { color: var(--primary); }

    .header-actions { display: flex; gap: 10px; }
    .icon-btn {
      width: 40px; height: 40px; border-radius: 50%;
      background: var(--bg-surface); border: 1px solid var(--border);
      display: flex; align-items: center; justify-content: center;
      color: var(--text-main); font-size: 1rem; cursor: pointer;
      position: relative; transition: 0.2s;
    }
    .icon-btn:active { transform: scale(0.9); }
    .badge {
      position: absolute; top: -2px; right: -2px;
      background: var(--primary); color: white;
      font-size: 0.65rem; padding: 2px 5px; border-radius: 10px;
      border: 2px solid var(--bg-surface);
      animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    /* --- SETTINGS STYLES --- */
    .settings-list { margin-top: 20px; }
    .settings-item {
      display: flex; align-items: center; gap: 15px; padding: 16px;
      background: var(--bg-surface); border: 1px solid var(--border);
      border-radius: var(--radius-m); margin-bottom: 10px; cursor: pointer;
      transition: 0.2s;
    }
    .settings-item:active { transform: scale(0.98); background: var(--bg-body); }
    .settings-item i:not(.chevron) { width: 24px; color: var(--primary); font-size: 1.1rem; }
    .settings-item .label { flex: 1; font-weight: 600; font-size: 0.95rem; }
    .settings-item .chevron { font-size: 0.8rem; color: var(--text-sub); }
    .user-profile-header { text-align: center; padding: 20px 0; }
    .user-avatar { width: 80px; height: 80px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: 800; margin: 0 auto 10px; }

    /* --- ORDER TYPE SELECTION --- */
    .order-type-container {
      display: flex; flex-direction: column; gap: 16px; padding: 24px;
    }
    .order-type-card {
      background: var(--bg-surface); border: 2px solid var(--border);
      border-radius: var(--radius-l); padding: 24px; display: flex;
      align-items: center; gap: 20px; cursor: pointer; transition: 0.3s;
    }
    .order-type-card:active { transform: scale(0.97); }
    .order-type-card.active { border-color: var(--primary); background: rgba(255, 102, 0, 0.05); }
    .order-type-icon { font-size: 2rem; color: var(--primary); }
    .order-type-info h3 { margin-bottom: 4px; }
    .order-type-info p { font-size: 0.85rem; color: var(--text-sub); }

    /* --- COMPONENT: LOYALTY CARD --- */
    .loyalty-card-premium {
      background: #111;
      color: white;
      border-radius: var(--radius-l);
      padding: 24px; margin: 0 24px 20px;
      position: relative; overflow: hidden;
      box-shadow: 0 15px 35px -10px rgba(0,0,0,0.3);
      border: 1px solid rgba(255,255,255,0.1);
    }
    .loyalty-card-premium::before {
      content: ''; position: absolute; top: -50px; right: -50px;
      width: 200px; height: 200px; border-radius: 50%;
      background: radial-gradient(circle, var(--primary) 0%, transparent 70%);
      opacity: 0.2;
    }
    .loyalty-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; position: relative; z-index: 2; }
    .points-big { font-size: 2.5rem; font-weight: 800; line-height: 1; letter-spacing: -1px; }
    .points-label { font-size: 0.85rem; opacity: 0.6; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; }
     
    .loyalty-progress-bg { background: rgba(255,255,255,0.15); height: 6px; border-radius: 10px; margin-bottom: 8px; position: relative; z-index: 2; }
    .loyalty-progress-fill { background: var(--primary); height: 100%; border-radius: 10px; width: 0%; transition: width 1s ease; }
    .loyalty-footer { display: flex; justify-content: space-between; font-size: 0.75rem; opacity: 0.8; position: relative; z-index: 2; }

    /* --- AD BANNER --- */
    .ad-banner {
      margin: 0 24px 24px;
      background: var(--bg-surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-m);
      padding: 16px;
      display: flex;
      align-items: center;
      gap: 15px;
      text-decoration: none;
      color: inherit;
    }
    .ad-logo { width: 50px; height: 50px; object-fit: contain; border-radius: 10px; }
    .ad-content { flex: 1; }
    .ad-title { font-weight: 800; font-size: 0.85rem; color: var(--text-main); margin-bottom: 2px; }
    .ad-desc { font-size: 0.75rem; color: var(--text-sub); line-height: 1.3; }
    .ad-btn { background: #000; color: #fff; padding: 6px 12px; border-radius: 8px; font-size: 0.7rem; font-weight: 700; }
    body.dark-mode .ad-btn { background: var(--primary); }

    /* --- WALLET VISUALS --- */
    .milk-card {
      background: linear-gradient(135deg, #2c3e50 0%, #000000 100%);
      color: white; border-radius: 20px; padding: 24px;
      position: relative; overflow: hidden; margin-bottom: 24px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
      border: 1px solid rgba(255,255,255,0.1);
      aspect-ratio: 1.58 / 1;
      display: flex; flex-direction: column; justify-content: space-between;
    }
    .milk-card::after {
        content: ''; position: absolute; top: -20%; right: -10%;
        width: 150px; height: 150px; background: var(--primary);
        filter: blur(80px); opacity: 0.3; border-radius: 50%;
    }
    .milk-card-top { display: flex; justify-content: space-between; align-items: center; z-index: 2; }
    .milk-card-name { font-weight: 800; font-size: 1.2rem; font-style: italic; letter-spacing: 1px; }
    .milk-card-chip { width: 45px; height: 35px; background: linear-gradient(135deg, #d4af37 0%, #f9e29c 100%); border-radius: 6px; }
    .milk-card-balance { z-index: 2; }
    .milk-card-num { font-family: monospace; font-size: 1.1rem; letter-spacing: 2px; opacity: 0.8; margin-bottom: 15px; }
     
    .wallet-info-box {
        background: rgba(255, 102, 0, 0.1);
        border: 1px dashed var(--primary);
        padding: 15px; border-radius: var(--radius-m);
        margin-bottom: 24px; text-align: center;
        font-size: 0.85rem; color: var(--text-main);
    }

    /* --- ACTIVITY LIST --- */
    .section-title { font-size: 1.1rem; font-weight: 700; margin: 24px 0 12px; padding: 0 24px; display: flex; justify-content: space-between; align-items: flex-end; }
    .activity-list { padding: 0 24px; }
    .activity-item {
      display: flex; align-items: center; gap: 15px;
      background: var(--bg-surface); border: 1px solid var(--border);
      padding: 16px; border-radius: var(--radius-m);
      margin-bottom: 12px; transition: transform 0.1s;
    }
    .activity-item:active { transform: scale(0.98); }

    .act-icon { width: 44px; height: 44px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; flex-shrink: 0; }
    .act-icon.type-order { background: rgba(255, 102, 0, 0.1); color: var(--color-order); }
    .act-icon.type-res { background: rgba(59, 130, 246, 0.1); color: var(--color-res); }
    .act-icon.type-money { background: rgba(16, 185, 129, 0.1); color: var(--color-money); }

    .act-content { flex: 1; }
    .act-title { font-weight: 700; font-size: 0.9rem; margin-bottom: 3px; }
    .act-date { font-size: 0.75rem; color: var(--text-sub); }
    .act-value { font-weight: 700; font-size: 0.9rem; }
    .act-value.positive { color: var(--color-money); }

    /* --- MENU GRID --- */
    .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; padding: 0 24px; }
    .menu-card {
      background: var(--bg-surface); border-radius: var(--radius-m);
      border: 1px solid var(--border); overflow: hidden;
      display: flex; flex-direction: column; cursor: pointer;
      transition: transform 0.1s;
    }
    .menu-card:active { transform: scale(0.96); }
    .menu-img-box { height: 120px; width: 100%; background: #eee; }
    .menu-img-box img { width: 100%; height: 100%; object-fit: cover; }
    .menu-content { padding: 12px; }
    .menu-title { font-weight: 700; font-size: 0.9rem; margin-bottom: 4px; line-height: 1.3; }
    .menu-price { color: var(--primary); font-weight: 700; font-size: 0.9rem; }

    /* --- RESERVATION VISUALS --- */
    .table-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 20px; }
    .table-select {
      border: 2px solid var(--border); border-radius: var(--radius-m);
      padding: 15px; text-align: center; cursor: pointer; transition: 0.2s;
      background: var(--bg-surface); font-size: 0.8rem; font-weight: 600;
    }
    .table-select.selected { border-color: var(--primary); background: rgba(255,102,0,0.05); color: var(--primary); }
    .table-select i { font-size: 1.2rem; display: block; margin-bottom: 6px; opacity: 0.6; }

    .form-group { margin-bottom: 16px; }
    .form-group label { font-size: 0.8rem; font-weight: 700; margin-bottom: 8px; display: block; color: var(--text-main); }
    .form-control {
      width: 100%; padding: 14px; background: var(--bg-body); 
      border: 1px solid var(--border); border-radius: var(--radius-m); 
      color: var(--text-main); font-family: inherit; font-size: 0.9rem;
    }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }

    /* --- GRID SELECTION FOR GIFT --- */
    .amount-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; }
    .amount-chip {
      padding: 12px 5px; border: 1px solid var(--border); border-radius: var(--radius-m);
      text-align: center; font-size: 0.85rem; font-weight: 700; cursor: pointer;
      background: var(--bg-surface); transition: 0.2s;
    }
    .amount-chip.selected { background: var(--primary); color: white; border-color: var(--primary); }

    /* --- BOTTOM NAV & FAB --- */
    .bottom-nav {
      position: fixed; bottom: 0; left: 50%; transform: translateX(-50%);
      width: 100%; max-width: 480px; height: calc(var(--nav-height) + env(safe-area-inset-bottom, 0px));
      background: var(--glass-bg);
      backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
      border-top: 1px solid var(--glass-border);
      display: flex; justify-content: space-between; align-items: center;
      padding: 0 20px calc(10px + env(safe-area-inset-bottom, 0px)) 20px; z-index: 1000;
      border-radius: 24px 24px 0 0;
    }
    .nav-item { display: flex; flex-direction: column; align-items: center; gap: 5px; color: var(--text-sub); text-decoration: none; font-size: 0.65rem; font-weight: 600; flex: 1; transition: color 0.2s; }
    .nav-item.active { color: var(--primary); }
    .nav-item i { font-size: 1.4rem; transition: transform 0.2s; }
    .nav-item.active i { transform: translateY(-3px); }

    .fab-container { position: relative; top: -25px; width: var(--fab-size); height: var(--fab-size); flex-shrink: 0; margin: 0 10px; }
    .fab-btn {
      width: 100%; height: 100%; background: var(--primary); border-radius: 50%;
      display: flex; align-items: center; justify-content: center; color: white; font-size: 1.8rem;
      box-shadow: 0 10px 25px var(--primary-glow); border: 5px solid var(--bg-body); cursor: pointer;
      animation: pulse 3s infinite;
    }

    /* --- MODALS --- */
    .modal-overlay {
      position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px);
      z-index: 2000; opacity: 0; pointer-events: none; display: flex; align-items: flex-end; transition: opacity 0.3s;
    }
    .modal-overlay.open { opacity: 1; pointer-events: auto; }
    .modal-sheet {
      width: 100%; max-width: 480px; margin: 0 auto; background: var(--bg-surface);
      border-radius: 30px 30px 0 0; padding: 30px 24px calc(40px + env(safe-area-inset-bottom, 0px));
      transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
      max-height: 85vh; overflow-y: auto;
    }
    .modal-overlay.open .modal-sheet { transform: translateY(0); }
     
    .modal-sheet.full { 
      height: 100vh; max-height: 100vh; border-radius: 0; 
      padding-top: calc(20px + var(--safe-top));
    }

    .qr-box { width: 180px; height: 180px; margin: 20px auto; position: relative; overflow: hidden; border-radius: 15px; }
    .qr-box img { width: 100%; height: 100%; }
    .scan-line {
      position: absolute; top: 0; left: 0; width: 100%; height: 4px;
      background: var(--primary); box-shadow: 0 0 15px var(--primary);
      animation: scan 2s infinite ease-in-out;
    }

    /* Utils */
    .view-section { display: none; padding-bottom: 20px; animation: fadeIn 0.3s ease; }
    .view-section.active { display: block; }
     
    .card { background: var(--bg-surface); border-radius: var(--radius-l); padding: 20px; margin: 0 24px 16px; border: 1px solid var(--border); }
    .btn-main { width: 100%; padding: 16px; border-radius: var(--radius-m); background: var(--primary); color: white; border: none; font-weight: 700; font-size: 1rem; cursor: pointer; transition: opacity 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px;}
    .btn-outline { width: 100%; padding: 14px; border-radius: var(--radius-m); background: transparent; color: var(--text-main); border: 1px solid var(--border); font-weight: 600; font-size: 0.9rem; cursor: pointer; margin-bottom: 30px;}
     
    /* Toggle Switch */
    .toggle-switch {
        position: relative; width: 50px; height: 26px;
    }
    .toggle-switch input { opacity: 0; width: 0; height: 0; }
    .slider {
        position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
        background-color: #ccc; transition: .4s; border-radius: 34px;
    }
    .slider:before {
        position: absolute; content: ""; height: 18px; width: 18px; left: 4px; bottom: 4px;
        background-color: white; transition: .4s; border-radius: 50%;
    }
    input:checked + .slider { background-color: var(--primary); }
    input:checked + .slider:before { transform: translateX(24px); }

    /* Animations & Keyframes */
    @keyframes scan { 0% {top: 0;} 50% {top: 100%;} 100% {top: 0;} }
    @keyframes popIn { from{transform:scale(0);} to{transform:scale(1);} }
    @keyframes fadeIn { from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);} }
    @keyframes spin { from{transform: rotate(0deg);} to{transform: rotate(360deg);} }
    @keyframes splashPop { 
        0% { opacity: 0; transform: scale(0.8); }
        100% { opacity: 1; transform: scale(1); }
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 var(--primary-glow); }
      70% { box-shadow: 0 0 0 15px rgba(255, 102, 0, 0); }
      100% { box-shadow: 0 0 0 0 rgba(255, 102, 0, 0); }
    }

    /* Toast */
    .toast {
      position: fixed; top: calc(20px + var(--safe-top)); left: 50%; transform: translateX(-50%) translateY(-150px);
      background: var(--bg-surface); color: var(--text-main);
      padding: 12px 20px; border-radius: 50px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      display: flex; align-items: center; gap: 10px;
      z-index: 3000; transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      font-weight: 600; font-size: 0.9rem; border: 1px solid var(--border);
    }
    .toast.visible { transform: translateX(-50%) translateY(0); }

  </style>
</head>
<body>

<div id="splash-screen">
  <div class="loader-content">
    <div class="loader-logo">MilkMi<span>.</span></div>
    <div class="loader-spinner"></div>
    <div class="loader-text">Wczytywanie dozna</div>
  </div>
</div>

<div class="app-container" id="main-app">

  <header class="app-header">
    <div class="brand">MilkMi<span>.</span></div>
    <div class="header-actions">
      <button class="icon-btn" onclick="toggleTheme()"><i class="fas fa-moon"></i></button>
      <button class="icon-btn" onclick="showCart()">
        <i class="fas fa-shopping-bag"></i>
        <div class="badge" id="cart-badge" style="display: none;">0</div>
      </button>
      <button class="icon-btn" onclick="openModal('settings-modal')">
        <i class="fas fa-cog"></i>
      </button>
    </div>
  </header>

  <section id="view-home" class="view-section active">
     
    <div style="padding: 10px 24px 20px;">
      <h2 style="font-size: 1.8rem; line-height: 1.2;">Cze Mikoaj, <br><span style="color:var(--text-sub); font-size: 1.1rem; font-weight:500;">Mio Ci widzie!</span></h2>
    </div>

    <div class="loyalty-card-premium" onclick="openQR()">
      <div class="loyalty-top">
        <div>
          <div class="points-label">Dostpne Punkty</div>
          <div class="points-big">1250</div>
        </div>
        <i class="fas fa-crown" style="font-size: 1.5rem; color: #FFD700;"></i>
      </div>
       
      <div class="loyalty-progress-bg">
        <div class="loyalty-progress-fill" style="width: 75%;"></div>
      </div>
       
      <div class="loyalty-footer">
        <span>Status: Gold</span>
        <span>250 do nagrody</span>
      </div>
    </div>

    <a href="https://www.eatmi.pl" target="_blank" class="ad-banner">
      <img src="https://i.imgur.com/rcaqjLK.png" alt="Eatmi Logo" class="ad-logo">
      <div class="ad-content">
        <div class="ad-title">Eatmi - Zam贸w z dowozem</div>
        <div class="ad-desc">Boxy niadaniowe i lunchowe pod wskazany adres</div>
      </div>
      <div class="ad-btn">WWW</div>
    </a>

    <div class="section-title">
      Ostatnia aktywno
      <span style="font-size: 0.85rem; color: var(--primary); font-weight: 600; cursor: pointer;">Historia</span>
    </div>

    <div class="activity-list" id="activity-container-home">
      </div>

  </section>

  <section id="view-order" class="view-section">
    <div id="order-type-selection">
        <div class="section-title">Jak chcesz zam贸wi?</div>
        <div class="order-type-container">
            <div class="order-type-card" onclick="selectOrderType('pickup')">
                <div class="order-type-icon"><i class="fas fa-store"></i></div>
                <div class="order-type-info">
                    <h3>Zam贸w z odbiorem</h3>
                    <p>Odbierz osobicie w lokalu bez kolejki</p>
                </div>
            </div>
            <div class="order-type-card" onclick="selectOrderType('delivery')">
                <div class="order-type-icon"><i class="fas fa-truck"></i></div>
                <div class="order-type-info">
                    <h3>Zam贸w z dowozem</h3>
                    <p>Dostarczymy pod Twoje drzwi</p>
                </div>
            </div>
        </div>
    </div>

    <div id="menu-view-actual" style="display: none;">
        <div class="section-title" style="display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-arrow-left" onclick="backToOrderType()" style="cursor: pointer; color: var(--primary);"></i>
            Nasze Menu
        </div>
        <div class="menu-grid" id="menu-container"></div>
    </div>
  </section>

  <section id="view-reservation" class="view-section">
    <div class="section-title">Zarezerwuj Stolik</div>
     
    <div class="card">
      <label style="font-size: 0.8rem; font-weight: 700; margin-bottom: 12px; display: block;">Wybierz stref</label>
      <div class="table-grid">
        <div class="table-select selected" onclick="selectZone(this, 'Sala frontowa')">
          <i class="fas fa-door-open"></i> Sala frontowa
        </div>
        <div class="table-select" onclick="selectZone(this, 'Sala g贸wna')">
          <i class="fas fa-chair"></i> Sala g贸wna
        </div>
        <div class="table-select" onclick="selectZone(this, 'Przy kciku dla dzieci')">
          <i class="fas fa-child"></i> Kcik dzieci
        </div>
        <div class="table-select" onclick="selectZone(this, 'VIP Box')">
          <i class="fas fa-crown"></i> VIP Box
        </div>
      </div>

      <div class="form-group">
        <label>Imi i Nazwisko</label>
        <input type="text" class="form-control" placeholder="np. Jan Kowalski">
      </div>

      <div class="form-group">
        <label>Numer telefonu</label>
        <input type="tel" class="form-control" placeholder="+48 000 000 000">
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Data i Godzina</label>
          <input type="datetime-local" class="form-control">
        </div>
        <div class="form-group">
          <label>Ilo os贸b</label>
          <select class="form-control">
            <script>
              for(let i=1; i<=20; i++) {
                document.write(`<option value="${i}">${i} ${i===1 ? 'osoba' : (i<5 ? 'osoby' : 'os贸b')}</option>`);
              }
            </script>
          </select>
        </div>
      </div>

      <div class="form-group">
        <label>Dodatkowe informacje (alergie itp.)</label>
        <textarea class="form-control" rows="2" placeholder="Opcjonalnie..."></textarea>
      </div>

      <button class="btn-main" style="margin-top: 10px;" onclick="submitReservation()">Potwierd藕 rezerwacj</button>
    </div>
  </section>

  <section id="view-wallet" class="view-section">
    <div class="section-title">M贸j Portfel</div>
     
    <div style="padding: 0 24px;">
        <div class="milk-card">
            <div class="milk-card-top">
                <div class="milk-card-name">MilkCard</div>
                <div class="milk-card-chip"></div>
            </div>
            <div class="milk-card-balance">
                <div style="font-size: 0.7rem; text-transform: uppercase; opacity: 0.7; margin-bottom: 5px;">Saldo karty</div>
                <div style="font-size: 2rem; font-weight: 800;">45.50 PLN</div>
            </div>
            <div class="milk-card-num">**** **** **** 8829</div>
        </div>

        <div class="wallet-info-box">
            <i class="fas fa-info-circle"></i> Kart mo偶esz doadowa w aplikacji lub <strong>got贸wk/kart przy kasie w lokalu</strong>.
        </div>

        <button class="btn-main" style="margin-bottom: 12px;" onclick="openModal('topup-modal')">
            <i class="fas fa-plus-circle"></i> Doaduj kart online
        </button>
        
        <button class="btn-outline" onclick="openModal('gift-modal')">
            <i class="fas fa-gift" style="margin-right: 8px;"></i> Kup kart na prezent
        </button>
    </div>

    <div class="section-title">Historia transakcji</div>
    <div class="activity-list" id="activity-container-wallet">
    </div>
  </section>

  <div class="modal-overlay" id="settings-modal" onclick="closeModal('settings-modal')">
    <div class="modal-sheet full" onclick="event.stopPropagation()">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <h2>Ustawienia</h2>
            <button class="icon-btn" onclick="closeModal('settings-modal')"><i class="fas fa-times"></i></button>
        </div>

        <div class="user-profile-header">
            <div class="user-avatar">M</div>
            <h3 id="set-name-display">Mikoaj</h3>
            <p style="color: var(--text-sub); font-size: 0.9rem;" id="set-email-display">mikolaj@example.com</p>
        </div>

        <div class="settings-list">
            <div class="settings-item" onclick="openModal('modal-personal-data')">
                <i class="fas fa-user-circle"></i>
                <div class="label">Dane osobowe</div>
                <i class="fas fa-chevron-right chevron"></i>
            </div>
             
            <div class="settings-item" onclick="openModal('modal-language')">
                <i class="fas fa-language"></i>
                <div class="label">Jzyk (Polski)</div>
                <i class="fas fa-chevron-right chevron"></i>
            </div>

            <div class="settings-item" onclick="openModal('modal-notifications')">
                <i class="fas fa-bell"></i>
                <div class="label">Powiadomienia PUSH</div>
                <i class="fas fa-chevron-right chevron"></i>
            </div>

            <div class="settings-item" onclick="openModal('modal-security')">
                <i class="fas fa-shield-alt"></i>
                <div class="label">Bezpieczestwo (FaceID/PIN)</div>
                <i class="fas fa-chevron-right chevron"></i>
            </div>

            <div class="settings-item" onclick="openModal('modal-business')">
                <i class="fas fa-briefcase"></i>
                <div class="label">Milk for Business</div>
                <i class="fas fa-chevron-right chevron"></i>
            </div>

            <hr style="border: none; border-top: 1px solid var(--border); margin: 15px 0;">

            <div class="settings-item" onclick="openModal('modal-about')">
                <i class="fas fa-info-circle"></i>
                <div class="label">O nas</div>
                <i class="fas fa-chevron-right chevron"></i>
            </div>

            <div class="settings-item" onclick="openModal('modal-help')">
                <i class="fas fa-question-circle"></i>
                <div class="label">Pomoc</div>
                <i class="fas fa-chevron-right chevron"></i>
            </div>

            <div class="settings-item" onclick="location.reload()" style="margin-top: 20px; border-color: #fee2e2; color: #ef4444;">
                <i class="fas fa-sign-out-alt" style="color: #ef4444;"></i>
                <div class="label">Wyloguj si</div>
            </div>
        </div>
    </div>
  </div>

  <div class="modal-overlay" id="modal-personal-data" onclick="closeModal('modal-personal-data')">
      <div class="modal-sheet" onclick="event.stopPropagation()">
          <h3>Dane osobowe</h3>
          <div class="form-group" style="margin-top:20px;">
              <label>Imi</label>
              <input type="text" class="form-control" value="Mikoaj">
          </div>
          <div class="form-group">
              <label>Email</label>
              <input type="email" class="form-control" value="mikolaj@example.com">
          </div>
          <div class="form-group">
              <label>Telefon</label>
              <input type="tel" class="form-control" value="+48 123 456 789">
          </div>
          <button class="btn-main" onclick="showToast('Dane zapisane'); closeModal('modal-personal-data')">Zapisz zmiany</button>
      </div>
  </div>

  <div class="modal-overlay" id="modal-language" onclick="closeModal('modal-language')">
    <div class="modal-sheet" onclick="event.stopPropagation()">
        <h3>Wybierz jzyk</h3>
        <div class="settings-list">
            <div class="settings-item" onclick="showToast('Ustawiono Polski'); closeModal('modal-language')">
                <div class="label">Polski</div>
                <i class="fas fa-check" style="color:var(--primary)"></i>
            </div>
            <div class="settings-item" onclick="showToast('Language set to English'); closeModal('modal-language')">
                <div class="label">English</div>
            </div>
        </div>
    </div>
  </div>

  <div class="modal-overlay" id="modal-notifications" onclick="closeModal('modal-notifications')">
    <div class="modal-sheet" onclick="event.stopPropagation()">
        <h3>Powiadomienia</h3>
        <div class="settings-item" style="cursor:default">
            <div class="label">Powiadomienia o promocjach</div>
            <label class="toggle-switch">
                <input type="checkbox" checked>
                <span class="slider"></span>
            </label>
        </div>
        <div class="settings-item" style="cursor:default">
            <div class="label">Status zam贸wienia</div>
            <label class="toggle-switch">
                <input type="checkbox" checked>
                <span class="slider"></span>
            </label>
        </div>
        <button class="btn-main" style="margin-top:20px;" onclick="closeModal('modal-notifications')">Gotowe</button>
    </div>
  </div>

  <div class="modal-overlay" id="modal-security" onclick="closeModal('modal-security')">
    <div class="modal-sheet" onclick="event.stopPropagation()">
        <h3>Bezpieczestwo</h3>
        <div class="settings-item" style="cursor:default">
            <div class="label">Logowanie biometryczne</div>
            <label class="toggle-switch">
                <input type="checkbox" checked>
                <span class="slider"></span>
            </label>
        </div>
        <div class="settings-item" onclick="showToast('Zmie PIN...')">
            <div class="label">Zmie kod PIN</div>
            <i class="fas fa-chevron-right chevron"></i>
        </div>
        <button class="btn-main" style="margin-top:20px;" onclick="closeModal('modal-security')">Zamknij</button>
    </div>
  </div>

  <div class="modal-overlay" id="modal-business" onclick="closeModal('modal-business')">
    <div class="modal-sheet" onclick="event.stopPropagation()">
        <h3>Milk for Business</h3>
        <p style="color:var(--text-sub); margin-bottom:20px;">Chcesz doczy do programu dla firm i zamawia posiki dla swoich pracownik贸w?</p>
        <button class="btn-main" onclick="showToast('Wysano zgoszenie do doradcy')">Dowiedz si wicej</button>
        <button class="btn-outline" style="border:none; margin-top:10px;" onclick="closeModal('modal-business')">Powr贸t</button>
    </div>
  </div>

  <div class="modal-overlay" id="modal-about" onclick="closeModal('modal-about')">
    <div class="modal-sheet" onclick="event.stopPropagation()">
        <h3>O MilkMi</h3>
        <p style="color:var(--text-sub); margin-bottom:15px;">Wersja aplikacji: 2.4.0 (2026)</p>
        <p style="font-size:0.9rem; line-height:1.5;">Milkmi to Twoja ulubiona kawiarnia i restauracja w jednej aplikacji. Nasz misj jest dostarczanie najwy偶szej jakoci produkt贸w prosto do Ciebie.</p>
        <button class="btn-main" style="margin-top:20px;" onclick="closeModal('modal-about')">Zamknij</button>
    </div>
  </div>

  <div class="modal-overlay" id="modal-help" onclick="closeModal('modal-help')">
    <div class="modal-sheet" onclick="event.stopPropagation()">
        <h3>Centrum Pomocy</h3>
        <div class="settings-list">
            <div class="settings-item" onclick="showToast('Czat z konsultantem...')">
                <i class="fas fa-comments"></i>
                <div class="label">Czat na 偶ywo</div>
            </div>
            <div class="settings-item" onclick="showToast('czenie z infolini...')">
                <i class="fas fa-phone"></i>
                <div class="label">Zadzwo do nas</div>
            </div>
            <div class="settings-item" onclick="showToast('FAQ wczytane')">
                <i class="fas fa-book"></i>
                <div class="label">Najczciej zadawane pytania</div>
            </div>
        </div>
        <button class="btn-main" style="margin-top:20px;" onclick="closeModal('modal-help')">Zamknij</button>
    </div>
  </div>

  <div class="modal-overlay" id="topup-modal" onclick="closeModal('topup-modal')">
    <div class="modal-sheet" onclick="event.stopPropagation()">
        <h3>Doaduj MilkCard</h3>
        <p style="color: var(--text-sub); margin-bottom: 20px; font-size: 0.9rem;">Wpisz kwot, o jak chcesz zasili swoj kart.</p>
         
        <div class="form-group">
            <label>Kwota doadowania (PLN)</label>
            <input type="number" class="form-control" placeholder="0.00" style="font-size: 1.5rem; font-weight: 700; text-align: center;">
        </div>

        <button class="btn-main" onclick="processPayment('Twoja karta zostaa doadowana!')">
            Przejd藕 do patnoci
        </button>
        <button class="btn-outline" style="border:none; margin-top:10px;" onclick="closeModal('topup-modal')">Anuluj</button>
    </div>
  </div>

  <div class="modal-overlay" id="gift-modal" onclick="closeModal('gift-modal')">
    <div class="modal-sheet" onclick="event.stopPropagation()">
        <h3>Karta Prepaid na Prezent</h3>
        <p style="color: var(--text-sub); margin-bottom: 20px; font-size: 0.9rem;">Wybierz kwot i podaj dane osoby obdarowywanej.</p>
         
        <label style="font-size: 0.8rem; font-weight: 700; margin-bottom: 10px; display: block;">Wybierz warto karty</label>
        <div class="amount-grid">
            <div class="amount-chip" onclick="selectAmount(this, 50)">50 PLN</div>
            <div class="amount-chip selected" onclick="selectAmount(this, 100)">100 PLN</div>
            <div class="amount-chip" onclick="selectAmount(this, 200)">200 PLN</div>
            <div class="amount-chip" onclick="selectAmount(this, 500)">500 PLN</div>
            <div class="amount-chip" onclick="selectAmount(this, 1000)">1000 PLN</div>
        </div>

        <div class="form-group">
            <label>Imi i Nazwisko obdarowanego</label>
            <input type="text" class="form-control" placeholder="Kto otrzyma prezent?">
        </div>

        <div class="form-group">
            <label>Numer telefonu</label>
            <input type="tel" class="form-control" placeholder="+48 000 000 000">
        </div>

        <div class="form-group">
            <label>Adres E-mail</label>
            <input type="email" class="form-control" placeholder="email@przyklad.pl">
        </div>

        <button class="btn-main" onclick="processPayment('Karta podarunkowa zostaa wysana!')">
            Kup i wylij prezent
        </button>
        <button class="btn-outline" style="border:none; margin-top:10px;" onclick="closeModal('gift-modal')">Anuluj</button>
    </div>
  </div>

  <div class="modal-overlay" id="qr-modal" onclick="closeModal('qr-modal')">
    <div class="modal-sheet" onclick="event.stopPropagation()">
      <div style="text-align: center;">
        <h3>Tw贸j kod czonkowski</h3>
        <p style="color: var(--text-sub); margin-bottom: 20px;">Poka偶 ten kod baricie, aby nabi punkty.</p>
         
        <div class="qr-box">
          <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=MilkmiUser123">
          <div class="scan-line"></div>
        </div>

        <button class="btn-main" style="background: var(--bg-body); color: var(--text-main); margin-top: 10px;" onclick="closeModal('qr-modal')">Zamknij</button>
      </div>
    </div>
  </div>

  <div class="modal-overlay" id="product-modal" onclick="closeModal('product-modal')">
    <div class="modal-sheet" onclick="event.stopPropagation()">
      <div id="product-detail-content"></div>
    </div>
  </div>

  <nav class="bottom-nav">
    <a href="#" class="nav-item active" onclick="switchTab('home', event)">
      <i class="fas fa-home"></i> <span>Start</span>
    </a>
    <a href="#" class="nav-item" onclick="switchTab('order', event)">
      <i class="fas fa-shopping-basket"></i> <span>Zam贸w</span>
    </a>
     
    <div class="fab-container" onclick="openQR()">
      <div class="fab-btn">
        <i class="fas fa-qrcode"></i>
      </div>
    </div>

    <a href="#" class="nav-item" onclick="switchTab('reservation', event)">
      <i class="fas fa-calendar-alt"></i> <span>Stolik</span>
    </a>
    <a href="#" class="nav-item" onclick="switchTab('wallet', event)">
      <i class="fas fa-wallet"></i> <span>Portfel</span>
    </a>
  </nav>

</div>

<div id="toast" class="toast">
  <i class="fas fa-check-circle"></i>
  <span id="toast-msg">Sukces</span>
</div>

<script>
  // --- DATA ---
  const products = [
    { id: 1, name: "Oreo Dream Shake", price: 19.00, img: "https://i.imgur.com/kfE4j7j.jpeg", cal: 450, desc: "Kultowy smak ciasteczek w formie szejka." },
    { id: 2, name: "Berry Blast", price: 18.50, img: "https://i.imgur.com/7Bx2X7g.png", cal: 320, desc: "Moc witamin z lenych owoc贸w." },
    { id: 3, name: "Double Choco", price: 21.00, img: "https://i.imgur.com/dsMynF5.png", cal: 560, desc: "Dla prawdziwych fan贸w czekolady." },
    { id: 4, name: "Pancake Tower", price: 24.00, img: "https://i.imgur.com/GRvCj6z.png", cal: 600, desc: "Wie偶a puszystych nalenik贸w z syropem." },
    { id: 5, name: "Pistacchio Ice", price: 24.00, img: "https://i.imgur.com/XIdoN0y.png", cal: 380, desc: "Prawdziwa sycylijska pistacja." },
    { id: 6, name: "Burger Vege", price: 29.00, img: "https://i.imgur.com/frz51UG.png", cal: 420, desc: "Halloumi, awokado, mango." }
  ];

  const activities = [
    { type: 'order', title: 'Patno MilkCard', date: 'Dzi, 14:30', val: '- 45.00 z', icon: 'fa-shopping-cart' },
    { type: 'money', title: 'Doadowanie przy kasie', date: 'Wczoraj, 10:20', val: '+ 50.00 z', icon: 'fa-cash-register' },
    { type: 'money', title: 'Doadowanie Online', date: '22 Sty, 09:15', val: '+ 100.00 z', icon: 'fa-globe' },
    { type: 'order', title: 'Patno MilkCard', date: '20 Sty, 12:45', val: '- 19.50 z', icon: 'fa-ice-cream' }
  ];

  let cart = [];
  let selectedZone = 'Sala frontowa';
  let selectedGiftAmount = 100;

  // --- INIT & LOADER LOGIC (ZMIENIONO NA 3 SEKUNDY) ---
  document.addEventListener('DOMContentLoaded', () => {
    // 3-sekundowy loader (3000ms)
    setTimeout(() => {
        const splash = document.getElementById('splash-screen');
        const main = document.getElementById('main-app');
         
        splash.style.opacity = '0';
        splash.style.visibility = 'hidden';
        main.style.opacity = '1';
        document.body.style.overflow = 'auto'; 
         
        setTimeout(() => {
            const fill = document.querySelector('.loyalty-progress-fill');
            if(fill) fill.style.width = '83%';
        }, 500);
    }, 3000);

    renderActivities();
    renderMenu();
  });

  // --- RENDERING ---
  function renderActivities() {
    const homeContainer = document.getElementById('activity-container-home');
    const walletContainer = document.getElementById('activity-container-wallet');
    let html = '';

    activities.forEach(item => {
      let typeClass = '';
      let valClass = '';
       
      if(item.type === 'order') { typeClass = 'type-order'; }
      if(item.type === 'res') { typeClass = 'type-res'; }
      if(item.type === 'money') { typeClass = 'type-money'; valClass = 'positive'; }

      html += `
        <div class="activity-item">
          <div class="act-icon ${typeClass}">
            <i class="fas ${item.icon}"></i>
          </div>
          <div class="act-content">
            <div class="act-title">${item.title}</div>
            <div class="act-date">${item.date}</div>
          </div>
          <div class="act-value ${valClass}">${item.val}</div>
        </div>
      `;
    });
     
    if(homeContainer) homeContainer.innerHTML = html;
    if(walletContainer) walletContainer.innerHTML = html;
  }

  function renderMenu() {
    const container = document.getElementById('menu-container');
    if(!container) return;
    let html = '';
    products.forEach(p => {
      html += `
        <div class="menu-card" onclick="openProduct(${p.id})">
          <div class="menu-img-box">
            <img src="${p.img}" alt="${p.name}">
          </div>
          <div class="menu-content">
            <div class="menu-title">${p.name}</div>
            <div class="menu-price">${p.price.toFixed(2)} z</div>
          </div>
        </div>
      `;
    });
    container.innerHTML = html;
  }

  // --- NAVIGATION ---
  function switchTab(tabId, event) {
    if(event) event.preventDefault();
     
    document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
    document.getElementById('view-' + tabId).classList.add('active');
     
    document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
     
    const navs = document.querySelectorAll('.nav-item');
    if(tabId === 'home') navs[0].classList.add('active');
    if(tabId === 'order') navs[1].classList.add('active');
    if(tabId === 'reservation') navs[2].classList.add('active');
    if(tabId === 'wallet') navs[3].classList.add('active');

    if(tabId === 'order') backToOrderType();
     
    window.scrollTo(0,0);
  }

  function selectOrderType(type) {
      document.getElementById('order-type-selection').style.display = 'none';
      document.getElementById('menu-view-actual').style.display = 'block';
      showToast(type === 'pickup' ? 'Wybrano odbi贸r osobisty' : 'Wybrano dow贸z');
  }

  function backToOrderType() {
      document.getElementById('order-type-selection').style.display = 'block';
      document.getElementById('menu-view-actual').style.display = 'none';
  }

  // --- MODALS & ACTIONS ---
  function openModal(id) {
    document.getElementById(id).classList.add('open');
  }

  function closeModal(id) {
    document.getElementById(id).classList.remove('open');
  }

  function openQR() {
    openModal('qr-modal');
  }

  function selectAmount(el, val) {
    document.querySelectorAll('.amount-chip').forEach(x => x.classList.remove('selected'));
    el.classList.add('selected');
    selectedGiftAmount = val;
  }

  function processPayment(msg) {
    showToast("Przekierowanie do patnoci...");
    setTimeout(() => {
        closeModal('topup-modal');
        closeModal('gift-modal');
        showToast(msg);
    }, 2000);
  }

  function openProduct(id) {
    const p = products.find(x => x.id === id);
    const content = document.getElementById('product-detail-content');
     
    content.innerHTML = `
      <div style="text-align:center; margin-bottom: 20px;">
        <img src="${p.img}" style="width:140px; height:140px; object-fit:cover; border-radius:20px; box-shadow: 0 10px 20px rgba(0,0,0,0.1);">
      </div>
      <h2 style="font-size: 1.5rem; margin-bottom: 5px;">${p.name}</h2>
      <p style="color: var(--text-sub); margin-bottom: 15px;">${p.desc}</p>
       
      <div style="display:flex; gap:10px; margin-bottom: 25px; flex-wrap: wrap; justify-content: center;">
        <span style="background:var(--bg-body); padding:5px 10px; border-radius:8px; font-size:0.8rem;"> ${p.cal} kcal</span>
        <span style="background:var(--bg-body); padding:5px 10px; border-radius:8px; font-size:0.8rem;"> Wegetariaskie</span>
      </div>

      <div style="display:flex; justify-content:space-between; align-items:center; margin-top:20px;">
        <div style="font-size: 1.4rem; font-weight:700;">${p.price.toFixed(2)} z</div>
        <button class="btn-main" style="width: auto; padding: 12px 30px;" onclick="addToCart(${p.id})">
          Dodaj do koszyka
        </button>
      </div>
    `;
     
    openModal('product-modal');
  }

  function addToCart(id) {
    cart.push(id);
    const badge = document.getElementById('cart-badge');
    badge.innerText = cart.length;
    badge.style.display = 'flex';
     
    closeModal('product-modal');
    showToast('Dodano do koszyka!');
  }

  function showCart() {
    if(cart.length === 0) showToast('Tw贸j koszyk jest pusty', false);
    else showToast(`Masz ${cart.length} produkt贸w w koszyku`);
  }

  function selectZone(el, zoneName) {
    document.querySelectorAll('.table-select').forEach(x => x.classList.remove('selected'));
    el.classList.add('selected');
    selectedZone = zoneName;
  }

  function submitReservation() {
    showToast('Rezerwacja wysana! ');
    setTimeout(() => switchTab('home'), 1500);
  }

  function toggleTheme() {
    document.body.classList.toggle('dark-mode');
  }

  function showToast(msg, success = true) {
    const t = document.getElementById('toast');
    document.getElementById('toast-msg').innerText = msg;
    t.classList.add('visible');
    setTimeout(() => t.classList.remove('visible'), 2500);
  }

</script>
</body>
</html>
